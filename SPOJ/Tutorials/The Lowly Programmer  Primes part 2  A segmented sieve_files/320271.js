document.write('<link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-d1006a2c03378524a2bad8f05b286964.css">')
document.write('<div id=\"gist320271\" class=\"gist\">\n        <div class=\"gist-file\">\n          <div class=\"gist-data gist-syntax\">\n            \n\n\n\n    <div class=\"file-data\">\n      <table cellpadding=\"0\" cellspacing=\"0\" class=\"lines highlight\">\n        <tr>\n          <td class=\"line-numbers\">\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L1\" rel=\"file-segmented_primes-go-L1\">1<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L2\" rel=\"file-segmented_primes-go-L2\">2<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L3\" rel=\"file-segmented_primes-go-L3\">3<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L4\" rel=\"file-segmented_primes-go-L4\">4<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L5\" rel=\"file-segmented_primes-go-L5\">5<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L6\" rel=\"file-segmented_primes-go-L6\">6<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L7\" rel=\"file-segmented_primes-go-L7\">7<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L8\" rel=\"file-segmented_primes-go-L8\">8<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L9\" rel=\"file-segmented_primes-go-L9\">9<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L10\" rel=\"file-segmented_primes-go-L10\">10<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L11\" rel=\"file-segmented_primes-go-L11\">11<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L12\" rel=\"file-segmented_primes-go-L12\">12<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L13\" rel=\"file-segmented_primes-go-L13\">13<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L14\" rel=\"file-segmented_primes-go-L14\">14<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L15\" rel=\"file-segmented_primes-go-L15\">15<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L16\" rel=\"file-segmented_primes-go-L16\">16<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L17\" rel=\"file-segmented_primes-go-L17\">17<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L18\" rel=\"file-segmented_primes-go-L18\">18<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L19\" rel=\"file-segmented_primes-go-L19\">19<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L20\" rel=\"file-segmented_primes-go-L20\">20<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L21\" rel=\"file-segmented_primes-go-L21\">21<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L22\" rel=\"file-segmented_primes-go-L22\">22<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L23\" rel=\"file-segmented_primes-go-L23\">23<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L24\" rel=\"file-segmented_primes-go-L24\">24<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L25\" rel=\"file-segmented_primes-go-L25\">25<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L26\" rel=\"file-segmented_primes-go-L26\">26<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L27\" rel=\"file-segmented_primes-go-L27\">27<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L28\" rel=\"file-segmented_primes-go-L28\">28<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L29\" rel=\"file-segmented_primes-go-L29\">29<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L30\" rel=\"file-segmented_primes-go-L30\">30<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L31\" rel=\"file-segmented_primes-go-L31\">31<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L32\" rel=\"file-segmented_primes-go-L32\">32<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L33\" rel=\"file-segmented_primes-go-L33\">33<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L34\" rel=\"file-segmented_primes-go-L34\">34<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L35\" rel=\"file-segmented_primes-go-L35\">35<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L36\" rel=\"file-segmented_primes-go-L36\">36<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L37\" rel=\"file-segmented_primes-go-L37\">37<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L38\" rel=\"file-segmented_primes-go-L38\">38<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L39\" rel=\"file-segmented_primes-go-L39\">39<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L40\" rel=\"file-segmented_primes-go-L40\">40<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L41\" rel=\"file-segmented_primes-go-L41\">41<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L42\" rel=\"file-segmented_primes-go-L42\">42<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L43\" rel=\"file-segmented_primes-go-L43\">43<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L44\" rel=\"file-segmented_primes-go-L44\">44<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L45\" rel=\"file-segmented_primes-go-L45\">45<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L46\" rel=\"file-segmented_primes-go-L46\">46<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L47\" rel=\"file-segmented_primes-go-L47\">47<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L48\" rel=\"file-segmented_primes-go-L48\">48<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L49\" rel=\"file-segmented_primes-go-L49\">49<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L50\" rel=\"file-segmented_primes-go-L50\">50<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L51\" rel=\"file-segmented_primes-go-L51\">51<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L52\" rel=\"file-segmented_primes-go-L52\">52<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L53\" rel=\"file-segmented_primes-go-L53\">53<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L54\" rel=\"file-segmented_primes-go-L54\">54<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L55\" rel=\"file-segmented_primes-go-L55\">55<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L56\" rel=\"file-segmented_primes-go-L56\">56<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L57\" rel=\"file-segmented_primes-go-L57\">57<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L58\" rel=\"file-segmented_primes-go-L58\">58<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L59\" rel=\"file-segmented_primes-go-L59\">59<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L60\" rel=\"file-segmented_primes-go-L60\">60<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L61\" rel=\"file-segmented_primes-go-L61\">61<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L62\" rel=\"file-segmented_primes-go-L62\">62<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L63\" rel=\"file-segmented_primes-go-L63\">63<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L64\" rel=\"file-segmented_primes-go-L64\">64<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L65\" rel=\"file-segmented_primes-go-L65\">65<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L66\" rel=\"file-segmented_primes-go-L66\">66<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L67\" rel=\"file-segmented_primes-go-L67\">67<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L68\" rel=\"file-segmented_primes-go-L68\">68<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L69\" rel=\"file-segmented_primes-go-L69\">69<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L70\" rel=\"file-segmented_primes-go-L70\">70<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L71\" rel=\"file-segmented_primes-go-L71\">71<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L72\" rel=\"file-segmented_primes-go-L72\">72<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L73\" rel=\"file-segmented_primes-go-L73\">73<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L74\" rel=\"file-segmented_primes-go-L74\">74<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L75\" rel=\"file-segmented_primes-go-L75\">75<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L76\" rel=\"file-segmented_primes-go-L76\">76<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L77\" rel=\"file-segmented_primes-go-L77\">77<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L78\" rel=\"file-segmented_primes-go-L78\">78<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L79\" rel=\"file-segmented_primes-go-L79\">79<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L80\" rel=\"file-segmented_primes-go-L80\">80<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L81\" rel=\"file-segmented_primes-go-L81\">81<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L82\" rel=\"file-segmented_primes-go-L82\">82<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L83\" rel=\"file-segmented_primes-go-L83\">83<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L84\" rel=\"file-segmented_primes-go-L84\">84<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L85\" rel=\"file-segmented_primes-go-L85\">85<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L86\" rel=\"file-segmented_primes-go-L86\">86<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L87\" rel=\"file-segmented_primes-go-L87\">87<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L88\" rel=\"file-segmented_primes-go-L88\">88<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L89\" rel=\"file-segmented_primes-go-L89\">89<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L90\" rel=\"file-segmented_primes-go-L90\">90<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L91\" rel=\"file-segmented_primes-go-L91\">91<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L92\" rel=\"file-segmented_primes-go-L92\">92<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L93\" rel=\"file-segmented_primes-go-L93\">93<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L94\" rel=\"file-segmented_primes-go-L94\">94<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L95\" rel=\"file-segmented_primes-go-L95\">95<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L96\" rel=\"file-segmented_primes-go-L96\">96<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L97\" rel=\"file-segmented_primes-go-L97\">97<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L98\" rel=\"file-segmented_primes-go-L98\">98<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L99\" rel=\"file-segmented_primes-go-L99\">99<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L100\" rel=\"file-segmented_primes-go-L100\">100<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L101\" rel=\"file-segmented_primes-go-L101\">101<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L102\" rel=\"file-segmented_primes-go-L102\">102<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L103\" rel=\"file-segmented_primes-go-L103\">103<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L104\" rel=\"file-segmented_primes-go-L104\">104<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L105\" rel=\"file-segmented_primes-go-L105\">105<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L106\" rel=\"file-segmented_primes-go-L106\">106<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L107\" rel=\"file-segmented_primes-go-L107\">107<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L108\" rel=\"file-segmented_primes-go-L108\">108<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L109\" rel=\"file-segmented_primes-go-L109\">109<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L110\" rel=\"file-segmented_primes-go-L110\">110<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L111\" rel=\"file-segmented_primes-go-L111\">111<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L112\" rel=\"file-segmented_primes-go-L112\">112<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L113\" rel=\"file-segmented_primes-go-L113\">113<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L114\" rel=\"file-segmented_primes-go-L114\">114<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L115\" rel=\"file-segmented_primes-go-L115\">115<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L116\" rel=\"file-segmented_primes-go-L116\">116<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L117\" rel=\"file-segmented_primes-go-L117\">117<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L118\" rel=\"file-segmented_primes-go-L118\">118<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L119\" rel=\"file-segmented_primes-go-L119\">119<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L120\" rel=\"file-segmented_primes-go-L120\">120<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L121\" rel=\"file-segmented_primes-go-L121\">121<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L122\" rel=\"file-segmented_primes-go-L122\">122<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L123\" rel=\"file-segmented_primes-go-L123\">123<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L124\" rel=\"file-segmented_primes-go-L124\">124<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L125\" rel=\"file-segmented_primes-go-L125\">125<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L126\" rel=\"file-segmented_primes-go-L126\">126<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L127\" rel=\"file-segmented_primes-go-L127\">127<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L128\" rel=\"file-segmented_primes-go-L128\">128<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L129\" rel=\"file-segmented_primes-go-L129\">129<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L130\" rel=\"file-segmented_primes-go-L130\">130<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L131\" rel=\"file-segmented_primes-go-L131\">131<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L132\" rel=\"file-segmented_primes-go-L132\">132<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L133\" rel=\"file-segmented_primes-go-L133\">133<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L134\" rel=\"file-segmented_primes-go-L134\">134<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L135\" rel=\"file-segmented_primes-go-L135\">135<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L136\" rel=\"file-segmented_primes-go-L136\">136<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L137\" rel=\"file-segmented_primes-go-L137\">137<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L138\" rel=\"file-segmented_primes-go-L138\">138<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L139\" rel=\"file-segmented_primes-go-L139\">139<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L140\" rel=\"file-segmented_primes-go-L140\">140<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L141\" rel=\"file-segmented_primes-go-L141\">141<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L142\" rel=\"file-segmented_primes-go-L142\">142<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L143\" rel=\"file-segmented_primes-go-L143\">143<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L144\" rel=\"file-segmented_primes-go-L144\">144<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L145\" rel=\"file-segmented_primes-go-L145\">145<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L146\" rel=\"file-segmented_primes-go-L146\">146<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L147\" rel=\"file-segmented_primes-go-L147\">147<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L148\" rel=\"file-segmented_primes-go-L148\">148<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L149\" rel=\"file-segmented_primes-go-L149\">149<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L150\" rel=\"file-segmented_primes-go-L150\">150<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L151\" rel=\"file-segmented_primes-go-L151\">151<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L152\" rel=\"file-segmented_primes-go-L152\">152<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L153\" rel=\"file-segmented_primes-go-L153\">153<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L154\" rel=\"file-segmented_primes-go-L154\">154<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L155\" rel=\"file-segmented_primes-go-L155\">155<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L156\" rel=\"file-segmented_primes-go-L156\">156<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L157\" rel=\"file-segmented_primes-go-L157\">157<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L158\" rel=\"file-segmented_primes-go-L158\">158<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L159\" rel=\"file-segmented_primes-go-L159\">159<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L160\" rel=\"file-segmented_primes-go-L160\">160<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L161\" rel=\"file-segmented_primes-go-L161\">161<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L162\" rel=\"file-segmented_primes-go-L162\">162<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L163\" rel=\"file-segmented_primes-go-L163\">163<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L164\" rel=\"file-segmented_primes-go-L164\">164<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L165\" rel=\"file-segmented_primes-go-L165\">165<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L166\" rel=\"file-segmented_primes-go-L166\">166<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L167\" rel=\"file-segmented_primes-go-L167\">167<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L168\" rel=\"file-segmented_primes-go-L168\">168<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L169\" rel=\"file-segmented_primes-go-L169\">169<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L170\" rel=\"file-segmented_primes-go-L170\">170<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L171\" rel=\"file-segmented_primes-go-L171\">171<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L172\" rel=\"file-segmented_primes-go-L172\">172<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L173\" rel=\"file-segmented_primes-go-L173\">173<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L174\" rel=\"file-segmented_primes-go-L174\">174<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L175\" rel=\"file-segmented_primes-go-L175\">175<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L176\" rel=\"file-segmented_primes-go-L176\">176<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L177\" rel=\"file-segmented_primes-go-L177\">177<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L178\" rel=\"file-segmented_primes-go-L178\">178<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L179\" rel=\"file-segmented_primes-go-L179\">179<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L180\" rel=\"file-segmented_primes-go-L180\">180<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L181\" rel=\"file-segmented_primes-go-L181\">181<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L182\" rel=\"file-segmented_primes-go-L182\">182<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L183\" rel=\"file-segmented_primes-go-L183\">183<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L184\" rel=\"file-segmented_primes-go-L184\">184<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L185\" rel=\"file-segmented_primes-go-L185\">185<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L186\" rel=\"file-segmented_primes-go-L186\">186<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L187\" rel=\"file-segmented_primes-go-L187\">187<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L188\" rel=\"file-segmented_primes-go-L188\">188<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L189\" rel=\"file-segmented_primes-go-L189\">189<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L190\" rel=\"file-segmented_primes-go-L190\">190<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L191\" rel=\"file-segmented_primes-go-L191\">191<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L192\" rel=\"file-segmented_primes-go-L192\">192<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L193\" rel=\"file-segmented_primes-go-L193\">193<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L194\" rel=\"file-segmented_primes-go-L194\">194<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L195\" rel=\"file-segmented_primes-go-L195\">195<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L196\" rel=\"file-segmented_primes-go-L196\">196<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L197\" rel=\"file-segmented_primes-go-L197\">197<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L198\" rel=\"file-segmented_primes-go-L198\">198<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L199\" rel=\"file-segmented_primes-go-L199\">199<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L200\" rel=\"file-segmented_primes-go-L200\">200<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L201\" rel=\"file-segmented_primes-go-L201\">201<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L202\" rel=\"file-segmented_primes-go-L202\">202<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L203\" rel=\"file-segmented_primes-go-L203\">203<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L204\" rel=\"file-segmented_primes-go-L204\">204<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L205\" rel=\"file-segmented_primes-go-L205\">205<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L206\" rel=\"file-segmented_primes-go-L206\">206<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L207\" rel=\"file-segmented_primes-go-L207\">207<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L208\" rel=\"file-segmented_primes-go-L208\">208<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L209\" rel=\"file-segmented_primes-go-L209\">209<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L210\" rel=\"file-segmented_primes-go-L210\">210<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L211\" rel=\"file-segmented_primes-go-L211\">211<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L212\" rel=\"file-segmented_primes-go-L212\">212<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L213\" rel=\"file-segmented_primes-go-L213\">213<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L214\" rel=\"file-segmented_primes-go-L214\">214<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L215\" rel=\"file-segmented_primes-go-L215\">215<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L216\" rel=\"file-segmented_primes-go-L216\">216<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L217\" rel=\"file-segmented_primes-go-L217\">217<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L218\" rel=\"file-segmented_primes-go-L218\">218<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L219\" rel=\"file-segmented_primes-go-L219\">219<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L220\" rel=\"file-segmented_primes-go-L220\">220<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L221\" rel=\"file-segmented_primes-go-L221\">221<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L222\" rel=\"file-segmented_primes-go-L222\">222<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L223\" rel=\"file-segmented_primes-go-L223\">223<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L224\" rel=\"file-segmented_primes-go-L224\">224<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L225\" rel=\"file-segmented_primes-go-L225\">225<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L226\" rel=\"file-segmented_primes-go-L226\">226<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L227\" rel=\"file-segmented_primes-go-L227\">227<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L228\" rel=\"file-segmented_primes-go-L228\">228<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L229\" rel=\"file-segmented_primes-go-L229\">229<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L230\" rel=\"file-segmented_primes-go-L230\">230<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L231\" rel=\"file-segmented_primes-go-L231\">231<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L232\" rel=\"file-segmented_primes-go-L232\">232<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L233\" rel=\"file-segmented_primes-go-L233\">233<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L234\" rel=\"file-segmented_primes-go-L234\">234<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L235\" rel=\"file-segmented_primes-go-L235\">235<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L236\" rel=\"file-segmented_primes-go-L236\">236<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L237\" rel=\"file-segmented_primes-go-L237\">237<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L238\" rel=\"file-segmented_primes-go-L238\">238<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L239\" rel=\"file-segmented_primes-go-L239\">239<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L240\" rel=\"file-segmented_primes-go-L240\">240<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L241\" rel=\"file-segmented_primes-go-L241\">241<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L242\" rel=\"file-segmented_primes-go-L242\">242<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L243\" rel=\"file-segmented_primes-go-L243\">243<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L244\" rel=\"file-segmented_primes-go-L244\">244<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L245\" rel=\"file-segmented_primes-go-L245\">245<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L246\" rel=\"file-segmented_primes-go-L246\">246<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L247\" rel=\"file-segmented_primes-go-L247\">247<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L248\" rel=\"file-segmented_primes-go-L248\">248<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L249\" rel=\"file-segmented_primes-go-L249\">249<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L250\" rel=\"file-segmented_primes-go-L250\">250<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L251\" rel=\"file-segmented_primes-go-L251\">251<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L252\" rel=\"file-segmented_primes-go-L252\">252<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L253\" rel=\"file-segmented_primes-go-L253\">253<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L254\" rel=\"file-segmented_primes-go-L254\">254<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L255\" rel=\"file-segmented_primes-go-L255\">255<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L256\" rel=\"file-segmented_primes-go-L256\">256<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L257\" rel=\"file-segmented_primes-go-L257\">257<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L258\" rel=\"file-segmented_primes-go-L258\">258<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L259\" rel=\"file-segmented_primes-go-L259\">259<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L260\" rel=\"file-segmented_primes-go-L260\">260<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L261\" rel=\"file-segmented_primes-go-L261\">261<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L262\" rel=\"file-segmented_primes-go-L262\">262<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L263\" rel=\"file-segmented_primes-go-L263\">263<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L264\" rel=\"file-segmented_primes-go-L264\">264<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L265\" rel=\"file-segmented_primes-go-L265\">265<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L266\" rel=\"file-segmented_primes-go-L266\">266<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L267\" rel=\"file-segmented_primes-go-L267\">267<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L268\" rel=\"file-segmented_primes-go-L268\">268<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L269\" rel=\"file-segmented_primes-go-L269\">269<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L270\" rel=\"file-segmented_primes-go-L270\">270<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L271\" rel=\"file-segmented_primes-go-L271\">271<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L272\" rel=\"file-segmented_primes-go-L272\">272<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L273\" rel=\"file-segmented_primes-go-L273\">273<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L274\" rel=\"file-segmented_primes-go-L274\">274<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L275\" rel=\"file-segmented_primes-go-L275\">275<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L276\" rel=\"file-segmented_primes-go-L276\">276<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L277\" rel=\"file-segmented_primes-go-L277\">277<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L278\" rel=\"file-segmented_primes-go-L278\">278<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L279\" rel=\"file-segmented_primes-go-L279\">279<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L280\" rel=\"file-segmented_primes-go-L280\">280<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L281\" rel=\"file-segmented_primes-go-L281\">281<\/span>\n            <span class=\"line-number\" id=\"file-segmented_primes-go-L282\" rel=\"file-segmented_primes-go-L282\">282<\/span>\n          <\/td>\n          <td class=\"line-data\">\n            <pre class=\"line-pre\"><div class=\"line\" id=\"file-segmented_primes-go-LC1\"><span class=\"c1\">// Go implementation of a segmented Sieve of Eratosthenes. Much faster than the lazy<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC2\"><span class=\"c1\">// evaluation variants above. Sieves first 10^12 primes in 1 hour (4 cores); 10^9<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC3\"><span class=\"c1\">// candidates in the region of 10^18 takes about 2 minutes.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC4\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC5\"><span class=\"kn\">package<\/span> <span class=\"nx\">main<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC6\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC7\"><span class=\"kn\">import<\/span> <span class=\"s\">&quot;flag&quot;<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC8\"><span class=\"kn\">import<\/span> <span class=\"s\">&quot;fmt&quot;<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC9\"><span class=\"kn\">import<\/span> <span class=\"s\">&quot;log&quot;<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC10\"><span class=\"kn\">import<\/span> <span class=\"s\">&quot;math&quot;<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC11\"><span class=\"kn\">import<\/span> <span class=\"s\">&quot;math/big&quot;<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC12\"><span class=\"kn\">import<\/span> <span class=\"s\">&quot;time&quot;<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC13\"><span class=\"kn\">import<\/span> <span class=\"s\">&quot;runtime&quot;<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC14\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC15\"><span class=\"kd\">var<\/span> <span class=\"nx\">min_prime<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">flag<\/span><span class=\"p\">.<\/span><span class=\"nx\">Int64<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;min&quot;<\/span><span class=\"p\">,<\/span> <span class=\"mi\">0<\/span><span class=\"p\">,<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC16\">	<span class=\"s\">&quot;Generate primes starting at this number.&quot;<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC17\"><span class=\"kd\">var<\/span> <span class=\"nx\">max_prime<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">flag<\/span><span class=\"p\">.<\/span><span class=\"nx\">Int64<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;max&quot;<\/span><span class=\"p\">,<\/span> <span class=\"mi\">1000000<\/span><span class=\"p\">,<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC18\">	<span class=\"s\">&quot;Generate primes up to and including this number.&quot;<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC19\"><span class=\"kd\">var<\/span> <span class=\"nx\">processes<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">flag<\/span><span class=\"p\">.<\/span><span class=\"nx\">Int<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;processes&quot;<\/span><span class=\"p\">,<\/span> <span class=\"mi\">2<\/span><span class=\"p\">,<\/span> <span class=\"s\">&quot;Number of processes to use. &quot;<\/span><span class=\"o\">+<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC20\">	<span class=\"s\">&quot;Best depends on the processor itself and the other flags set.&quot;<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC21\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC22\"><span class=\"kd\">var<\/span> <span class=\"nx\">sum_only<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">flag<\/span><span class=\"p\">.<\/span><span class=\"nx\">Bool<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;sum_only&quot;<\/span><span class=\"p\">,<\/span> <span class=\"kc\">false<\/span><span class=\"p\">,<\/span> <span class=\"s\">&quot;Output only the sum to the main &quot;<\/span><span class=\"o\">+<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC23\">	<span class=\"s\">&quot;thread, not every individual prime.&quot;<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC24\"><span class=\"kd\">var<\/span> <span class=\"nx\">vanilla<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">flag<\/span><span class=\"p\">.<\/span><span class=\"nx\">Bool<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;vanilla&quot;<\/span><span class=\"p\">,<\/span> <span class=\"kc\">false<\/span><span class=\"p\">,<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC25\">	<span class=\"s\">&quot;Skip the segmenting entirely and use one large array.&quot;<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC26\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC27\"><span class=\"c1\">// Fine tuning nobs; probably don&#39;t need to change these.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC28\"><span class=\"kd\">var<\/span> <span class=\"nx\">segment_size<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">flag<\/span><span class=\"p\">.<\/span><span class=\"nx\">Int64<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;segment_size&quot;<\/span><span class=\"p\">,<\/span> <span class=\"mi\">0<\/span><span class=\"p\">,<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC29\">	<span class=\"s\">&quot;Number of values in each segment to check.&quot;<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC30\"><span class=\"kd\">var<\/span> <span class=\"nx\">segment_buffer<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">flag<\/span><span class=\"p\">.<\/span><span class=\"nx\">Int<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;buffer&quot;<\/span><span class=\"p\">,<\/span> <span class=\"mi\">0<\/span><span class=\"p\">,<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC31\">	<span class=\"s\">&quot;Optional override for the size of channel buffers to use.&quot;<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC32\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC33\"><span class=\"kd\">var<\/span> <span class=\"nx\">DEBUG<\/span> <span class=\"p\">=<\/span> <span class=\"kc\">false<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC34\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC35\"><span class=\"kd\">func<\/span> <span class=\"nx\">main<\/span><span class=\"p\">()<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC36\">	<span class=\"nx\">flag<\/span><span class=\"p\">.<\/span><span class=\"nx\">Parse<\/span><span class=\"p\">()<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC37\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC38\">	<span class=\"k\">if<\/span> <span class=\"o\">*<\/span><span class=\"nx\">max_prime<\/span> <span class=\"p\">&lt;<\/span> <span class=\"o\">*<\/span><span class=\"nx\">min_prime<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC39\">		<span class=\"nx\">log<\/span><span class=\"p\">.<\/span><span class=\"nx\">Fatal<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;Max must be &gt;= min.&quot;<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC40\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC41\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC42\">	<span class=\"nx\">segment_min<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">int64<\/span><span class=\"p\">(<\/span><span class=\"nx\">math<\/span><span class=\"p\">.<\/span><span class=\"nx\">Sqrt<\/span><span class=\"p\">(<\/span><span class=\"nb\">float64<\/span><span class=\"p\">(<\/span><span class=\"o\">*<\/span><span class=\"nx\">max_prime<\/span><span class=\"p\">)))<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC43\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC44\">	<span class=\"k\">if<\/span> <span class=\"o\">*<\/span><span class=\"nx\">segment_size<\/span> <span class=\"o\">==<\/span> <span class=\"mi\">0<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC45\">		<span class=\"o\">*<\/span><span class=\"nx\">segment_size<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">segment_min<\/span> <span class=\"o\">*<\/span> <span class=\"mi\">2<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC46\">	<span class=\"p\">}<\/span> <span class=\"k\">else<\/span> <span class=\"k\">if<\/span> <span class=\"nx\">segment_min<\/span> <span class=\"p\">&gt;<\/span> <span class=\"o\">*<\/span><span class=\"nx\">segment_size<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC47\">		<span class=\"nx\">fmt<\/span><span class=\"p\">.<\/span><span class=\"nx\">Printf<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;WARNING: Low segment size detected. Recommend setting &quot;<\/span><span class=\"o\">+<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC48\">			<span class=\"s\">&quot;--segment_size to at least %v (currently %v)\\n&quot;<\/span><span class=\"p\">,<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC49\">			<span class=\"nx\">segment_min<\/span><span class=\"p\">,<\/span> <span class=\"o\">*<\/span><span class=\"nx\">segment_size<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC50\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC51\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC52\">	<span class=\"k\">if<\/span> <span class=\"o\">*<\/span><span class=\"nx\">sum_only<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC53\">		<span class=\"nx\">size<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">big<\/span><span class=\"p\">.<\/span><span class=\"nx\">NewInt<\/span><span class=\"p\">(<\/span><span class=\"o\">*<\/span><span class=\"nx\">segment_size<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC54\">		<span class=\"nx\">max<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">big<\/span><span class=\"p\">.<\/span><span class=\"nx\">NewInt<\/span><span class=\"p\">(<\/span><span class=\"o\">*<\/span><span class=\"nx\">max_prime<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC55\">		<span class=\"nx\">size<\/span><span class=\"p\">.<\/span><span class=\"nx\">Mul<\/span><span class=\"p\">(<\/span><span class=\"nx\">size<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC56\">		<span class=\"k\">if<\/span> <span class=\"nx\">size<\/span><span class=\"p\">.<\/span><span class=\"nx\">Cmp<\/span><span class=\"p\">(<\/span><span class=\"nx\">big<\/span><span class=\"p\">.<\/span><span class=\"nx\">NewInt<\/span><span class=\"p\">((<\/span><span class=\"mi\">1<\/span><span class=\"o\">&lt;&lt;<\/span><span class=\"mi\">62<\/span><span class=\"p\">)<\/span><span class=\"o\">-<\/span><span class=\"mi\">1<\/span><span class=\"p\">))<\/span> <span class=\"p\">&gt;<\/span> <span class=\"mi\">0<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC57\">			<span class=\"nx\">log<\/span><span class=\"p\">.<\/span><span class=\"nx\">Fatalln<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;ERROR: Numbers too large for --sum_only to be safe.&quot;<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC58\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC59\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC60\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC61\">	<span class=\"k\">if<\/span> <span class=\"o\">*<\/span><span class=\"nx\">segment_buffer<\/span> <span class=\"o\">==<\/span> <span class=\"mi\">0<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC62\">		<span class=\"o\">*<\/span><span class=\"nx\">segment_buffer<\/span> <span class=\"p\">=<\/span> <span class=\"nb\">int<\/span><span class=\"p\">(<\/span><span class=\"o\">*<\/span><span class=\"nx\">segment_size<\/span> <span class=\"o\">/<\/span> <span class=\"mi\">20<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC63\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC64\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC65\">	<span class=\"nx\">runtime<\/span><span class=\"p\">.<\/span><span class=\"nx\">GOMAXPROCS<\/span><span class=\"p\">(<\/span><span class=\"o\">*<\/span><span class=\"nx\">processes<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC66\">	<span class=\"nx\">t<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">time<\/span><span class=\"p\">.<\/span><span class=\"nx\">Now<\/span><span class=\"p\">()<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC67\">	<span class=\"nx\">Run<\/span><span class=\"p\">(<\/span><span class=\"o\">*<\/span><span class=\"nx\">min_prime<\/span><span class=\"p\">,<\/span> <span class=\"o\">*<\/span><span class=\"nx\">max_prime<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC68\">	<span class=\"nx\">fmt<\/span><span class=\"p\">.<\/span><span class=\"nx\">Println<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;Took&quot;<\/span><span class=\"p\">,<\/span> <span class=\"nx\">time<\/span><span class=\"p\">.<\/span><span class=\"nx\">Since<\/span><span class=\"p\">(<\/span><span class=\"nx\">t<\/span><span class=\"p\">))<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC69\"><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC70\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC71\"><span class=\"kd\">func<\/span> <span class=\"nx\">Run<\/span><span class=\"p\">(<\/span><span class=\"nx\">min<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC72\">	<span class=\"c1\">// Schedule worker that fills a channel with segments<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC73\">	<span class=\"c1\">// Each segment does its work then fills a channel with the results<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC74\">	<span class=\"c1\">// Main thread then consumes segments; consumes primes from segment<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC75\">	<span class=\"nx\">primes<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">make<\/span><span class=\"p\">(<\/span><span class=\"kd\">chan<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"o\">*<\/span><span class=\"nx\">segment_buffer<\/span><span class=\"o\">**<\/span><span class=\"nx\">processes<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC76\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC77\">	<span class=\"k\">go<\/span> <span class=\"nx\">GenPrimes<\/span><span class=\"p\">(<\/span><span class=\"nx\">min<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span><span class=\"p\">,<\/span> <span class=\"nx\">primes<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC78\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC79\">	<span class=\"nx\">sum<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">new<\/span><span class=\"p\">(<\/span><span class=\"nx\">big<\/span><span class=\"p\">.<\/span><span class=\"nx\">Int<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC80\">	<span class=\"nx\">accumulator<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">int64<\/span><span class=\"p\">(<\/span><span class=\"mi\">0<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC81\">	<span class=\"k\">for<\/span> <span class=\"nx\">v<\/span> <span class=\"o\">:=<\/span> <span class=\"k\">range<\/span> <span class=\"nx\">primes<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC82\">		<span class=\"k\">if<\/span> <span class=\"nx\">v<\/span> <span class=\"p\">&gt;<\/span> <span class=\"p\">(<\/span><span class=\"mi\">1<\/span><span class=\"o\">&lt;&lt;<\/span><span class=\"mi\">62<\/span><span class=\"p\">)<\/span><span class=\"o\">-<\/span><span class=\"mi\">1<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC83\">			<span class=\"nx\">AddInt<\/span><span class=\"p\">(<\/span><span class=\"nx\">sum<\/span><span class=\"p\">,<\/span> <span class=\"nx\">v<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC84\">			<span class=\"k\">continue<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC85\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC86\">		<span class=\"k\">if<\/span> <span class=\"nx\">accumulator<\/span> <span class=\"p\">&gt;<\/span> <span class=\"p\">(<\/span><span class=\"mi\">1<\/span><span class=\"o\">&lt;&lt;<\/span><span class=\"mi\">62<\/span><span class=\"p\">)<\/span><span class=\"o\">-<\/span><span class=\"mi\">1<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC87\">			<span class=\"nx\">AddInt<\/span><span class=\"p\">(<\/span><span class=\"nx\">sum<\/span><span class=\"p\">,<\/span> <span class=\"nx\">accumulator<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC88\">			<span class=\"nx\">accumulator<\/span> <span class=\"p\">=<\/span> <span class=\"mi\">0<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC89\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC90\">		<span class=\"nx\">accumulator<\/span> <span class=\"o\">+=<\/span> <span class=\"nx\">v<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC91\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC92\">	<span class=\"nx\">AddInt<\/span><span class=\"p\">(<\/span><span class=\"nx\">sum<\/span><span class=\"p\">,<\/span> <span class=\"nx\">accumulator<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC93\">	<span class=\"nx\">fmt<\/span><span class=\"p\">.<\/span><span class=\"nx\">Printf<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;Sum of primes from %v up to %v is %v\\n&quot;<\/span><span class=\"p\">,<\/span> <span class=\"nx\">min<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span><span class=\"p\">,<\/span> <span class=\"nx\">sum<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC94\"><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC95\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC96\"><span class=\"c1\">// Returns a slice of all primes in [3, max]. Uses a linear array, no segmenting.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC97\"><span class=\"kd\">func<\/span> <span class=\"nx\">ArrayPrimes<\/span><span class=\"p\">(<\/span><span class=\"nx\">max<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">)<\/span> <span class=\"p\">[]<\/span><span class=\"kt\">int64<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC98\">	<span class=\"k\">if<\/span> <span class=\"nx\">Even<\/span><span class=\"p\">(<\/span><span class=\"nx\">max<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC99\">		<span class=\"nx\">max<\/span> <span class=\"o\">-=<\/span> <span class=\"mi\">1<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC100\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC101\">	<span class=\"nx\">primes<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">make<\/span><span class=\"p\">([]<\/span><span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"mi\">0<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC102\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC103\">	<span class=\"nx\">bits<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">NewBitArray<\/span><span class=\"p\">(<\/span><span class=\"mi\">3<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC104\">	<span class=\"k\">for<\/span> <span class=\"nx\">i<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">int64<\/span><span class=\"p\">(<\/span><span class=\"mi\">3<\/span><span class=\"p\">);<\/span> <span class=\"nx\">i<\/span> <span class=\"o\">&lt;=<\/span> <span class=\"nx\">max<\/span><span class=\"p\">;<\/span> <span class=\"nx\">i<\/span> <span class=\"o\">+=<\/span> <span class=\"mi\">2<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC105\">		<span class=\"k\">if<\/span> <span class=\"nx\">bits<\/span><span class=\"p\">.<\/span><span class=\"nx\">Bit<\/span><span class=\"p\">(<\/span><span class=\"nx\">i<\/span><span class=\"p\">)<\/span> <span class=\"o\">==<\/span> <span class=\"kc\">false<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC106\">			<span class=\"c1\">// Prime!<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC107\">			<span class=\"nx\">primes<\/span> <span class=\"p\">=<\/span> <span class=\"nb\">append<\/span><span class=\"p\">(<\/span><span class=\"nx\">primes<\/span><span class=\"p\">,<\/span> <span class=\"nx\">i<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC108\">			<span class=\"k\">for<\/span> <span class=\"nx\">next<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">i<\/span> <span class=\"o\">*<\/span> <span class=\"nx\">i<\/span><span class=\"p\">;<\/span> <span class=\"nx\">next<\/span> <span class=\"o\">&lt;=<\/span> <span class=\"nx\">max<\/span><span class=\"p\">;<\/span> <span class=\"nx\">next<\/span> <span class=\"o\">+=<\/span> <span class=\"nx\">i<\/span> <span class=\"o\">*<\/span> <span class=\"mi\">2<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC109\">				<span class=\"nx\">bits<\/span><span class=\"p\">.<\/span><span class=\"nx\">SetBit<\/span><span class=\"p\">(<\/span><span class=\"nx\">next<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC110\">			<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC111\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC112\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC113\">	<span class=\"k\">return<\/span> <span class=\"nx\">primes<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC114\"><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC115\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC116\"><span class=\"kd\">func<\/span> <span class=\"nx\">GenPrimes<\/span><span class=\"p\">(<\/span><span class=\"nx\">min<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"nx\">out<\/span> <span class=\"kd\">chan<\/span><span class=\"o\">&lt;-<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC117\">	<span class=\"c1\">// Pre-calculate first sqrt(n) primes, for all the segments to reference.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC118\">	<span class=\"kd\">var<\/span> <span class=\"nx\">pre<\/span> <span class=\"kt\">int64<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC119\">	<span class=\"k\">if<\/span> <span class=\"o\">*<\/span><span class=\"nx\">vanilla<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC120\">		<span class=\"nx\">pre<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">max<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC121\">	<span class=\"p\">}<\/span> <span class=\"k\">else<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC122\">		<span class=\"nx\">pre<\/span> <span class=\"p\">=<\/span> <span class=\"nb\">int64<\/span><span class=\"p\">(<\/span><span class=\"nx\">math<\/span><span class=\"p\">.<\/span><span class=\"nx\">Sqrt<\/span><span class=\"p\">(<\/span><span class=\"nb\">float64<\/span><span class=\"p\">(<\/span><span class=\"nx\">max<\/span><span class=\"p\">)))<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC123\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC124\">	<span class=\"nx\">pre_primes<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">ArrayPrimes<\/span><span class=\"p\">(<\/span><span class=\"nx\">pre<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC125\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC126\">	<span class=\"k\">if<\/span> <span class=\"nx\">min<\/span> <span class=\"o\">&lt;=<\/span> <span class=\"mi\">2<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC127\">		<span class=\"nx\">out<\/span> <span class=\"o\">&lt;-<\/span> <span class=\"mi\">2<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC128\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC129\">	<span class=\"k\">for<\/span> <span class=\"nx\">_<\/span><span class=\"p\">,<\/span> <span class=\"nx\">v<\/span> <span class=\"o\">:=<\/span> <span class=\"k\">range<\/span> <span class=\"nx\">pre_primes<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC130\">		<span class=\"k\">if<\/span> <span class=\"nx\">v<\/span> <span class=\"o\">&gt;=<\/span> <span class=\"nx\">min<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC131\">			<span class=\"nx\">out<\/span> <span class=\"o\">&lt;-<\/span> <span class=\"nx\">v<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC132\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC133\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC134\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC135\">	<span class=\"nx\">segments<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">make<\/span><span class=\"p\">(<\/span><span class=\"kd\">chan<\/span> <span class=\"kd\">chan<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"o\">*<\/span><span class=\"nx\">processes<\/span><span class=\"o\">-<\/span><span class=\"mi\">1<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC136\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC137\">	<span class=\"c1\">// Copy primes from the individual segments to &#39;out&#39;, closing it when every<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC138\">	<span class=\"c1\">// prime is in.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC139\">	<span class=\"k\">go<\/span> <span class=\"kd\">func<\/span><span class=\"p\">()<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC140\">		<span class=\"nx\">start_time<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">time<\/span><span class=\"p\">.<\/span><span class=\"nx\">Now<\/span><span class=\"p\">()<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC141\">		<span class=\"nx\">last_time<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">start_time<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC142\">		<span class=\"nx\">num_segments<\/span> <span class=\"o\">:=<\/span> <span class=\"p\">(<\/span><span class=\"nx\">max<\/span> <span class=\"o\">-<\/span> <span class=\"nx\">min<\/span><span class=\"p\">)<\/span> <span class=\"o\">/<\/span> <span class=\"o\">*<\/span><span class=\"nx\">segment_size<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC143\">		<span class=\"k\">if<\/span> <span class=\"nx\">num_segments<\/span> <span class=\"o\">==<\/span> <span class=\"mi\">0<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC144\">			<span class=\"nx\">num_segments<\/span> <span class=\"p\">=<\/span> <span class=\"mi\">1<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC145\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC146\">		<span class=\"nx\">done_segments<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">int64<\/span><span class=\"p\">(<\/span><span class=\"mi\">0<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC147\">		<span class=\"k\">for<\/span> <span class=\"nx\">s<\/span> <span class=\"o\">:=<\/span> <span class=\"k\">range<\/span> <span class=\"nx\">segments<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC148\">			<span class=\"k\">for<\/span> <span class=\"nx\">v<\/span> <span class=\"o\">:=<\/span> <span class=\"k\">range<\/span> <span class=\"nx\">s<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC149\">				<span class=\"nx\">out<\/span> <span class=\"o\">&lt;-<\/span> <span class=\"nx\">v<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC150\">			<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC151\">			<span class=\"nx\">done_segments<\/span> <span class=\"o\">+=<\/span> <span class=\"mi\">1<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC152\">			<span class=\"k\">if<\/span> <span class=\"nx\">time<\/span><span class=\"p\">.<\/span><span class=\"nx\">Since<\/span><span class=\"p\">(<\/span><span class=\"nx\">last_time<\/span><span class=\"p\">)<\/span> <span class=\"p\">&gt;<\/span> <span class=\"nx\">time<\/span><span class=\"p\">.<\/span><span class=\"nx\">Second<\/span><span class=\"o\">*<\/span><span class=\"mi\">5<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC153\">				<span class=\"nx\">fmt<\/span><span class=\"p\">.<\/span><span class=\"nx\">Printf<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;Elapsed %v Done segments %v/%v (%v%%)\\n&quot;<\/span><span class=\"p\">,<\/span> <span class=\"nx\">time<\/span><span class=\"p\">.<\/span><span class=\"nx\">Since<\/span><span class=\"p\">(<\/span><span class=\"nx\">start_time<\/span><span class=\"p\">),<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC154\">					<span class=\"nx\">done_segments<\/span><span class=\"p\">,<\/span> <span class=\"nx\">num_segments<\/span><span class=\"p\">,<\/span> <span class=\"mf\">100.0<\/span><span class=\"o\">*<\/span><span class=\"nb\">float64<\/span><span class=\"p\">(<\/span><span class=\"nx\">done_segments<\/span><span class=\"p\">)<\/span><span class=\"o\">/<\/span><span class=\"nb\">float64<\/span><span class=\"p\">(<\/span><span class=\"nx\">num_segments<\/span><span class=\"p\">))<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC155\">				<span class=\"nx\">last_time<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">time<\/span><span class=\"p\">.<\/span><span class=\"nx\">Now<\/span><span class=\"p\">()<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC156\">			<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC157\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC158\">		<span class=\"nb\">close<\/span><span class=\"p\">(<\/span><span class=\"nx\">out<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC159\">	<span class=\"p\">}()<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC160\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC161\">	<span class=\"c1\">// Now setup the segments themselves for calculating the batches.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC162\">	<span class=\"c1\">// Each outputs to its own channel, to keep ordering intact, although they may<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC163\">	<span class=\"c1\">// be processed in parallel.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC164\">	<span class=\"nx\">next<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">pre<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC165\">	<span class=\"k\">if<\/span> <span class=\"nx\">min<\/span> <span class=\"p\">&gt;<\/span> <span class=\"nx\">next<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC166\">		<span class=\"nx\">next<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">min<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC167\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC168\">	<span class=\"k\">for<\/span> <span class=\"nx\">next<\/span> <span class=\"o\">&lt;=<\/span> <span class=\"nx\">max<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC169\">		<span class=\"nx\">next_end<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">next<\/span> <span class=\"o\">+<\/span> <span class=\"o\">*<\/span><span class=\"nx\">segment_size<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC170\">		<span class=\"k\">if<\/span> <span class=\"nx\">max<\/span> <span class=\"p\">&lt;<\/span> <span class=\"nx\">next_end<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC171\">			<span class=\"nx\">next_end<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">max<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC172\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC173\">		<span class=\"kd\">var<\/span> <span class=\"nx\">c<\/span> <span class=\"kd\">chan<\/span> <span class=\"kt\">int64<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC174\">		<span class=\"k\">if<\/span> <span class=\"o\">*<\/span><span class=\"nx\">sum_only<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC175\">			<span class=\"nx\">c<\/span> <span class=\"p\">=<\/span> <span class=\"nb\">make<\/span><span class=\"p\">(<\/span><span class=\"kd\">chan<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"mi\">1<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC176\">		<span class=\"p\">}<\/span> <span class=\"k\">else<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC177\">			<span class=\"nx\">c<\/span> <span class=\"p\">=<\/span> <span class=\"nb\">make<\/span><span class=\"p\">(<\/span><span class=\"kd\">chan<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"o\">*<\/span><span class=\"nx\">segment_buffer<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC178\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC179\">		<span class=\"k\">go<\/span> <span class=\"nx\">GenSegment<\/span><span class=\"p\">(<\/span><span class=\"nx\">next<\/span><span class=\"p\">,<\/span> <span class=\"nx\">next_end<\/span><span class=\"p\">,<\/span> <span class=\"nx\">pre_primes<\/span><span class=\"p\">,<\/span> <span class=\"nx\">c<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC180\">		<span class=\"nx\">segments<\/span> <span class=\"o\">&lt;-<\/span> <span class=\"nx\">c<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC181\">		<span class=\"nx\">next<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">next_end<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC182\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC183\">	<span class=\"nb\">close<\/span><span class=\"p\">(<\/span><span class=\"nx\">segments<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC184\"><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC185\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC186\"><span class=\"c1\">// Generates primes in [min, max] and outputs them to out.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC187\"><span class=\"c1\">// &#39;primes&#39; must contain all primes &lt;= sqrt(max) (except 2).<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC188\"><span class=\"kd\">func<\/span> <span class=\"nx\">GenSegment<\/span><span class=\"p\">(<\/span><span class=\"nx\">min<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"nx\">primes<\/span> <span class=\"p\">[]<\/span><span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"nx\">out<\/span> <span class=\"kd\">chan<\/span><span class=\"o\">&lt;-<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC189\">	<span class=\"k\">if<\/span> <span class=\"nx\">Even<\/span><span class=\"p\">(<\/span><span class=\"nx\">min<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC190\">		<span class=\"nx\">min<\/span> <span class=\"o\">+=<\/span> <span class=\"mi\">1<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC191\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC192\">	<span class=\"k\">if<\/span> <span class=\"nx\">Even<\/span><span class=\"p\">(<\/span><span class=\"nx\">max<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC193\">		<span class=\"nx\">max<\/span> <span class=\"o\">-=<\/span> <span class=\"mi\">1<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC194\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC195\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC196\">	<span class=\"nx\">bits<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">NewBitArray<\/span><span class=\"p\">(<\/span><span class=\"nx\">min<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC197\">	<span class=\"k\">for<\/span> <span class=\"nx\">_<\/span><span class=\"p\">,<\/span> <span class=\"nx\">p<\/span> <span class=\"o\">:=<\/span> <span class=\"k\">range<\/span> <span class=\"nx\">primes<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC198\">		<span class=\"nx\">start<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">p<\/span> <span class=\"o\">*<\/span> <span class=\"nx\">p<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC199\">		<span class=\"k\">if<\/span> <span class=\"nx\">start<\/span> <span class=\"p\">&gt;<\/span> <span class=\"nx\">max<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC200\">			<span class=\"k\">break<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC201\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC202\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC203\">		<span class=\"c1\">// Find first value that is a multiple of p, &gt;= min, and odd.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC204\">		<span class=\"k\">if<\/span> <span class=\"nx\">start<\/span> <span class=\"p\">&lt;<\/span> <span class=\"nx\">min<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC205\">			<span class=\"nx\">start<\/span> <span class=\"p\">=<\/span> <span class=\"nx\">min<\/span> <span class=\"o\">-<\/span> <span class=\"p\">(<\/span><span class=\"nx\">min<\/span> <span class=\"o\">%<\/span> <span class=\"nx\">p<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC206\">			<span class=\"k\">if<\/span> <span class=\"nx\">start<\/span> <span class=\"p\">&lt;<\/span> <span class=\"nx\">min<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC207\">				<span class=\"nx\">start<\/span> <span class=\"o\">+=<\/span> <span class=\"nx\">p<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC208\">			<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC209\">			<span class=\"k\">if<\/span> <span class=\"nx\">Even<\/span><span class=\"p\">(<\/span><span class=\"nx\">start<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC210\">				<span class=\"nx\">start<\/span> <span class=\"o\">+=<\/span> <span class=\"nx\">p<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC211\">			<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC212\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC213\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC214\">		<span class=\"k\">for<\/span> <span class=\"nx\">start<\/span> <span class=\"o\">&lt;=<\/span> <span class=\"nx\">max<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC215\">			<span class=\"nx\">bits<\/span><span class=\"p\">.<\/span><span class=\"nx\">SetBit<\/span><span class=\"p\">(<\/span><span class=\"nx\">start<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC216\">			<span class=\"nx\">start<\/span> <span class=\"o\">+=<\/span> <span class=\"mi\">2<\/span> <span class=\"o\">*<\/span> <span class=\"nx\">p<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC217\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC218\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC219\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC220\">	<span class=\"c1\">// Output the primes remaining.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC221\">	<span class=\"nx\">sum<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">int64<\/span><span class=\"p\">(<\/span><span class=\"mi\">0<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC222\">	<span class=\"nx\">sum_only<\/span> <span class=\"o\">:=<\/span> <span class=\"o\">*<\/span><span class=\"nx\">sum_only<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC223\">	<span class=\"k\">for<\/span> <span class=\"nx\">i<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">min<\/span><span class=\"p\">;<\/span> <span class=\"nx\">i<\/span> <span class=\"o\">&lt;=<\/span> <span class=\"nx\">max<\/span><span class=\"p\">;<\/span> <span class=\"nx\">i<\/span> <span class=\"o\">+=<\/span> <span class=\"mi\">2<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC224\">		<span class=\"k\">if<\/span> <span class=\"nx\">bits<\/span><span class=\"p\">.<\/span><span class=\"nx\">Bit<\/span><span class=\"p\">(<\/span><span class=\"nx\">i<\/span><span class=\"p\">)<\/span> <span class=\"o\">==<\/span> <span class=\"kc\">false<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC225\">			<span class=\"nx\">sum<\/span> <span class=\"o\">+=<\/span> <span class=\"nx\">i<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC226\">			<span class=\"k\">if<\/span> <span class=\"p\">!<\/span><span class=\"nx\">sum_only<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC227\">				<span class=\"nx\">out<\/span> <span class=\"o\">&lt;-<\/span> <span class=\"nx\">i<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC228\">			<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC229\">		<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC230\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC231\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC232\">	<span class=\"k\">if<\/span> <span class=\"nx\">sum_only<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC233\">		<span class=\"nx\">out<\/span> <span class=\"o\">&lt;-<\/span> <span class=\"nx\">sum<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC234\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC235\">	<span class=\"nb\">close<\/span><span class=\"p\">(<\/span><span class=\"nx\">out<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC236\"><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC237\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC238\"><span class=\"kd\">func<\/span> <span class=\"nx\">Even<\/span><span class=\"p\">(<\/span><span class=\"nx\">num<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">)<\/span> <span class=\"kt\">bool<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC239\">	<span class=\"k\">return<\/span> <span class=\"nx\">num<\/span><span class=\"o\">&amp;<\/span><span class=\"mi\">1<\/span> <span class=\"o\">==<\/span> <span class=\"mi\">0<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC240\"><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC241\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC242\"><span class=\"kd\">func<\/span> <span class=\"nx\">AddInt<\/span><span class=\"p\">(<\/span><span class=\"nx\">z<\/span> <span class=\"o\">*<\/span><span class=\"nx\">big<\/span><span class=\"p\">.<\/span><span class=\"nx\">Int<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC243\">	<span class=\"nx\">x_big<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">big<\/span><span class=\"p\">.<\/span><span class=\"nx\">NewInt<\/span><span class=\"p\">(<\/span><span class=\"nx\">x<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC244\">	<span class=\"nx\">z<\/span><span class=\"p\">.<\/span><span class=\"nx\">Add<\/span><span class=\"p\">(<\/span><span class=\"nx\">z<\/span><span class=\"p\">,<\/span> <span class=\"nx\">x_big<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC245\"><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC246\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC247\"><span class=\"c1\">// A structure for efficiently addressing odd bits. Similar performance to a<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC248\"><span class=\"c1\">// bool array, except requires much less space.<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC249\"><span class=\"kd\">type<\/span> <span class=\"nx\">BitArray<\/span> <span class=\"kd\">struct<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC250\">	<span class=\"nx\">Min<\/span>  <span class=\"kt\">int64<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC251\">	<span class=\"nx\">Max<\/span>  <span class=\"kt\">int64<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC252\">	<span class=\"nx\">data<\/span> <span class=\"p\">[]<\/span><span class=\"kt\">byte<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC253\"><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC254\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC255\"><span class=\"kd\">func<\/span> <span class=\"nx\">NewBitArray<\/span><span class=\"p\">(<\/span><span class=\"nx\">min<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">)<\/span> <span class=\"o\">*<\/span><span class=\"nx\">BitArray<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC256\">	<span class=\"k\">if<\/span> <span class=\"nx\">Even<\/span><span class=\"p\">(<\/span><span class=\"nx\">min<\/span><span class=\"p\">)<\/span> <span class=\"o\">||<\/span> <span class=\"nx\">Even<\/span><span class=\"p\">(<\/span><span class=\"nx\">max<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC257\">		<span class=\"nx\">log<\/span><span class=\"p\">.<\/span><span class=\"nx\">Fatalf<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;min and max must be odd; got (%v, %v)\\n&quot;<\/span><span class=\"p\">,<\/span> <span class=\"nx\">min<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC258\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC259\">	<span class=\"nx\">elements<\/span> <span class=\"o\">:=<\/span> <span class=\"p\">((<\/span><span class=\"nx\">max<\/span> <span class=\"o\">-<\/span> <span class=\"nx\">min<\/span><span class=\"p\">)<\/span> <span class=\"o\">/<\/span> <span class=\"mi\">2<\/span><span class=\"p\">)<\/span> <span class=\"o\">+<\/span> <span class=\"mi\">1<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC260\">	<span class=\"nx\">data<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">make<\/span><span class=\"p\">([]<\/span><span class=\"kt\">byte<\/span><span class=\"p\">,<\/span> <span class=\"p\">(<\/span><span class=\"nx\">elements<\/span><span class=\"o\">+<\/span><span class=\"mi\">7<\/span><span class=\"p\">)<\/span><span class=\"o\">&gt;&gt;<\/span><span class=\"mi\">3<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC261\">	<span class=\"k\">return<\/span> <span class=\"o\">&amp;<\/span><span class=\"nx\">BitArray<\/span><span class=\"p\">{<\/span><span class=\"nx\">min<\/span><span class=\"p\">,<\/span> <span class=\"nx\">max<\/span><span class=\"p\">,<\/span> <span class=\"nx\">data<\/span><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC262\"><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC263\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC264\"><span class=\"kd\">func<\/span> <span class=\"p\">(<\/span><span class=\"nx\">b<\/span> <span class=\"o\">*<\/span><span class=\"nx\">BitArray<\/span><span class=\"p\">)<\/span> <span class=\"nx\">Bit<\/span><span class=\"p\">(<\/span><span class=\"nx\">index<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">)<\/span> <span class=\"kt\">bool<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC265\">	<span class=\"k\">if<\/span> <span class=\"nx\">DEBUG<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"p\">(<\/span><span class=\"nx\">index<\/span> <span class=\"p\">&lt;<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">Min<\/span> <span class=\"o\">||<\/span> <span class=\"nx\">index<\/span> <span class=\"p\">&gt;<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">Max<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC266\">		<span class=\"nx\">log<\/span><span class=\"p\">.<\/span><span class=\"nx\">Fatalf<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;Index out of bounds! %v outside [%v, %v]\\n&quot;<\/span><span class=\"p\">,<\/span> <span class=\"nx\">index<\/span><span class=\"p\">,<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">Min<\/span><span class=\"p\">,<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">Max<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC267\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC268\">	<span class=\"nx\">offset<\/span> <span class=\"o\">:=<\/span> <span class=\"p\">(<\/span><span class=\"nx\">index<\/span> <span class=\"o\">-<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">Min<\/span><span class=\"p\">)<\/span> <span class=\"o\">/<\/span> <span class=\"mi\">2<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC269\">	<span class=\"nx\">offset_byte<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">offset<\/span> <span class=\"o\">&gt;&gt;<\/span> <span class=\"mi\">3<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC270\">	<span class=\"nx\">offset_bit<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">uint<\/span><span class=\"p\">(<\/span><span class=\"nx\">offset<\/span> <span class=\"o\">&amp;<\/span> <span class=\"mh\">0x7<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC271\">	<span class=\"k\">return<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">data<\/span><span class=\"p\">[<\/span><span class=\"nx\">offset_byte<\/span><span class=\"p\">]<\/span><span class=\"o\">&amp;<\/span><span class=\"p\">(<\/span><span class=\"mi\">1<\/span><span class=\"o\">&lt;&lt;<\/span><span class=\"nx\">offset_bit<\/span><span class=\"p\">)<\/span> <span class=\"p\">&gt;<\/span> <span class=\"mi\">0<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC272\"><span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC273\">&nbsp;<\/div><div class=\"line\" id=\"file-segmented_primes-go-LC274\"><span class=\"kd\">func<\/span> <span class=\"p\">(<\/span><span class=\"nx\">b<\/span> <span class=\"o\">*<\/span><span class=\"nx\">BitArray<\/span><span class=\"p\">)<\/span> <span class=\"nx\">SetBit<\/span><span class=\"p\">(<\/span><span class=\"nx\">index<\/span> <span class=\"kt\">int64<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC275\">	<span class=\"k\">if<\/span> <span class=\"nx\">DEBUG<\/span> <span class=\"o\">&amp;&amp;<\/span> <span class=\"p\">(<\/span><span class=\"nx\">index<\/span> <span class=\"p\">&lt;<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">Min<\/span> <span class=\"o\">||<\/span> <span class=\"nx\">index<\/span> <span class=\"p\">&gt;<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">Max<\/span><span class=\"p\">)<\/span> <span class=\"p\">{<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC276\">		<span class=\"nx\">log<\/span><span class=\"p\">.<\/span><span class=\"nx\">Fatalf<\/span><span class=\"p\">(<\/span><span class=\"s\">&quot;Index out of bounds! %v outside [%v, %v]\\n&quot;<\/span><span class=\"p\">,<\/span> <span class=\"nx\">index<\/span><span class=\"p\">,<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">Min<\/span><span class=\"p\">,<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">Max<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC277\">	<span class=\"p\">}<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC278\">	<span class=\"nx\">offset<\/span> <span class=\"o\">:=<\/span> <span class=\"p\">(<\/span><span class=\"nx\">index<\/span> <span class=\"o\">-<\/span> <span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">Min<\/span><span class=\"p\">)<\/span> <span class=\"o\">/<\/span> <span class=\"mi\">2<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC279\">	<span class=\"nx\">offset_byte<\/span> <span class=\"o\">:=<\/span> <span class=\"nx\">offset<\/span> <span class=\"o\">&gt;&gt;<\/span> <span class=\"mi\">3<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC280\">	<span class=\"nx\">offset_bit<\/span> <span class=\"o\">:=<\/span> <span class=\"nb\">uint<\/span><span class=\"p\">(<\/span><span class=\"nx\">offset<\/span> <span class=\"o\">&amp;<\/span> <span class=\"mh\">0x7<\/span><span class=\"p\">)<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC281\">	<span class=\"nx\">b<\/span><span class=\"p\">.<\/span><span class=\"nx\">data<\/span><span class=\"p\">[<\/span><span class=\"nx\">offset_byte<\/span><span class=\"p\">]<\/span> <span class=\"o\">|=<\/span> <span class=\"mi\">1<\/span> <span class=\"o\">&lt;&lt;<\/span> <span class=\"nx\">offset_bit<\/span><\/div><div class=\"line\" id=\"file-segmented_primes-go-LC282\"><span class=\"p\">}<\/span><\/div><\/pre>\n          <\/td>\n        <\/tr>\n      <\/table>\n    <\/div>\n\n          <\/div>\n          <div class=\"gist-meta\">\n            <a href=\"https://gist.github.com/EricBurnett/320271/raw/segmented_primes.go\" style=\"float:right\">view raw<\/a>\n            <a href=\"https://gist.github.com/EricBurnett/320271#file-segmented_primes-go\">segmented_primes.go<\/a>\n            hosted with &#10084; by <a href=\"https://github.com\">GitHub<\/a>\n          <\/div>\n        <\/div>\n<\/div>\n')
