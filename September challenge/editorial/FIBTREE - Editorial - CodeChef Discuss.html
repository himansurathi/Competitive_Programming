<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0061)http://discuss.codechef.com/questions/50952/fibtree-editorial -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>FIBTREE - Editorial - CodeChef Discuss</title>
        <meta name="description" content="Problem link : contest practiceDifficulty : HardPre-requisites : heavy-light decomposition, segment trees, persistenceSolution : First, let&#39;s recall one of the properties of Fibonacci numbers: the n-th Fibbonacci number is axn+(1-a)yn, where:a equals to (3+sqrt(5))/(5+sqrt(5));x equals to (1+">
        <meta name="keywords" content="hard,segment-tree,heavy-light,editorial,sept14,persistence,math">
        
        <link rel="canonical" href="./FIBTREE - Editorial - CodeChef Discuss_files/FIBTREE - Editorial - CodeChef Discuss.html">
        <link rel="alternate" type="application/rss+xml" title="RSS" href="http://discuss.codechef.com/questions/50952/fibtree-editorial?type=rss">

        
        
        <link rel="shortcut icon" href="http://discuss.codechef.com/upfiles/favicon_1.ico">
        <link href="./FIBTREE - Editorial - CodeChef Discuss_files/style.css" rel="stylesheet" type="text/css">
        
        <link href="./FIBTREE - Editorial - CodeChef Discuss_files/custom.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" type="text/css" href="./FIBTREE - Editorial - CodeChef Discuss_files/jquery-ui.css">
        <!--[if IE 6]>
        <style type="text/css">
        img, div, a { behavior: url(/m/default/media/iepngfix/iepngfix.htc) }
        </style>
        <![endif]-->
        

        <script type="text/javascript" async="" src="./FIBTREE - Editorial - CodeChef Discuss_files/atrk.js"></script><script src="./FIBTREE - Editorial - CodeChef Discuss_files/jsapi" type="text/javascript"></script>
        <script type="text/javascript">
        /*<![CDATA[*/
            google.load("jquery", "1.4.2");
            google.load("jqueryui", "1", {autoload:true});

            var i18nLang = 'en';
            var appUrl = 'http://discuss.codechef.com'
            var scriptUrl = '/'
            var osqaSkin = 'default';

            var messages = {
                username: 'Himansu Rathi',
                confirm: "Are you sure?",
                yes: "Yes",
                no: "No",
                message: "Message:",
                cancel: "Cancel",
                close: "Close",
                ok: "Ok",
                matching_tags_url: "/matching_tags/",
                word: "word",
                words: "words",
                character: "character",
                characters: "characters"
            }
        /*]]>*/
        </script><script src="./FIBTREE - Editorial - CodeChef Discuss_files/jquery.min.js" type="text/javascript"></script><script src="./FIBTREE - Editorial - CodeChef Discuss_files/jquery-ui.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="./FIBTREE - Editorial - CodeChef Discuss_files/osqa.main.js"></script>
        
        
        
        
        
        <script type="text/javascript" src="./FIBTREE - Editorial - CodeChef Discuss_files/osqa.question.js"></script>
        <script type="text/javascript" src="./FIBTREE - Editorial - CodeChef Discuss_files/jquery.caret.js"></script>
        <script type="text/javascript" src="./FIBTREE - Editorial - CodeChef Discuss_files/showdown.js"></script>
        <script type="text/javascript" src="./FIBTREE - Editorial - CodeChef Discuss_files/wmd.js"></script>
        <link rel="stylesheet" type="text/css" href="./FIBTREE - Editorial - CodeChef Discuss_files/wmd.css">

        
        <script type="text/javascript" src="./FIBTREE - Editorial - CodeChef Discuss_files/viewbox_min.js"></script>
        <script type="text/javascript" src="./FIBTREE - Editorial - CodeChef Discuss_files/youtube.js"></script>
        <link rel="stylesheet" type="text/css" href="./FIBTREE - Editorial - CodeChef Discuss_files/viewbox.css">
        
        

        <script type="text/javascript">
        $().ready(function(){
            $("#nav_questions").attr('className',"on");
            var answer_sort_tab = "";

            if (answer_sort_tab) {
                $("#" + answer_sort_tab).attr('className',"on");
            }

            $('#editor').TextAreaResizer();

            //toggle preview of editor
            var display = true;
            var txt = "[hide preview]";
            $('#pre-collapse').text(txt);
            $('#pre-collapse').bind('click', function(){
                txt = display ? "[show preview]" : "[hide preview]";
                display = !display;
                $('#previewer').toggle();
                $('#pre-collapse').text(txt);
            });
        });

        function submitClicked(e, f) {
            if(!(browserTester('chrome') || browserTester('safari'))) {
                $("input.submit")[0].disabled=true;
            }
            window.removeEventListener('beforeunload', beforeUnload, true);
            if (f) {
                f.submit();
            }
        }

        function beforeUnload(e) {

            if($("textarea#editor")[0].value != "") {
                return yourWorkWillBeLost(e);
            }

            var commentBoxes = $("textarea.commentBox");
            for(var index = 0; index < commentBoxes.length; index++) {
                if(commentBoxes[index].value != "") {
                    return yourWorkWillBeLost(e);
                }
            }
        }
        window.addEventListener('beforeunload', beforeUnload, true);
        </script>
        <noscript>
            &lt;style&gt;
                .comment.not_top_scorer {
                    display: block;
                }
                .comment-form-container {
                    display: block;
                }
                .div.comment-tools {
                    display: none;
                }
            &lt;/style&gt;
        </noscript>

        <link rel="search" type="application/opensearchdescription+xml" href="http://discuss.codechef.com/opensearch.xml" title="CodeChef Discuss Search">
        
    </head>
    <body>
        <div class="wrapper">
        
        <!-- template header.html -->

<script type="text/javascript">

    $(document).ready(function () {
        initSearchBoxValue();
    })


    function initSearchBoxValue()
    {
        var searchKeyword= $("#keywords").val();
            if (searchKeyword=="")
            {
                $("#keywords").val("Search Here...");
            }
   }

    function searchBoxOnBlur(){
        $("#keyword").className="searchInput";
        if ($("#keywords").val()=="")
                $("#keywords").val("Search Here...");
    }

    function searchBoxOnFocus(){
        $("#keyword").className="searchInputFocused";
        if ($("#keywords").val()=="Search Here...")
            $("#keywords").val("");
   }

    function about(){
        if (document.URL=="http://osqa.codechef.local/about/")
        {
            $("")
        }
    }

</script>



 

	<div id="roof">



		<div id="logo">
			<a href="http://discuss.codechef.com/">
				<img src="./FIBTREE - Editorial - CodeChef Discuss_files/site-logo_21.png" title="back to home page" alt="CodeChef Discuss logo">
			</a>
		</div>
	  
		<div id="top">
		     <a href="http://discuss.codechef.com/users/38996/himansu-rathi">Himansu Rathi</a> <span class="score" title="1 karma">1</span> <a href="http://discuss.codechef.com/logout/">Log Out</a> 

            <div id="nav">
                <a id="nav_questions" class="on" href="http://discuss.codechef.com/questions/">questions</a><a id="nav_tags" href="http://discuss.codechef.com/tags/">tags</a><a id="nav_users" href="http://discuss.codechef.com/users/">users</a><a id="nav_badges" href="http://discuss.codechef.com/badges/">badges</a><a id="nav_unanswered" href="http://discuss.codechef.com/questions/unanswered/">unanswered</a>
                <a id="horiSeparator">
                </a><a id="nav_ask" href="http://discuss.codechef.com/questions/ask/" class="special">ask a question</a>
                <a id="nav_about" href="http://discuss.codechef.com/about" class="off" onclick="about()">about</a>
                <a id="nav_faq" href="http://discuss.codechef.com/faq">faq</a>

            </div>
		</div>











  </div>

  <div class="clear"></div>
	<div id="searchBar">




        <table id="searchBarTable">
            <tbody><tr>
                <td class="left">
                    CodeChef Discussion
                </td>
                <td class="right">
                    <form action="http://discuss.codechef.com/search/" method="get">
                    <div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="7e6a0742ef6fb87b45f08d90f1a55986"></div>
                        <table>
                            <tbody><tr>
                                <td>
                                    <input type="text" class="searchInput" value="" name="q" id="keywords" onfocus="searchBoxOnFocus()" onblur="searchBoxOnBlur()">
                                </td>
                                <td>
                                    <div class="options">
                                        <input id="type-question" type="radio" value="question" name="t" checked="checked"><label for="type-question">questions</label>
                                        <input id="type-tag" type="radio" value="tag" name="t"><label for="type-tag">tags</label>
                                        <input id="type-user" type="radio" value="user" name="t"><label for="type-user">users</label>
                                    </div>
                                </td>
                            </tr>
                        </tbody></table>
                    </form>
                </td>
            </tr>
        </tbody></table>
        <h1 id="separator">
        </h1>
	</div>


	

<!-- end template header.html -->

        



<div id="wrapper">
    
    
    <div id="room">
        <div id="CALeft">
            
<div class="headNormal">
    <h1>FIBTREE - Editorial</h1>
</div>
<div id="main-body" class="">
    <div id="askform">
            <table style="width:100%;" id="question-table">
                <tbody><tr>
                    <td style="width:30px;vertical-align:top">
                        <div class="vote-buttons">
                            

<a id="post-50952-upvote" title="I like this post (click again to cancel)" class="ajax-command post-vote up " href="http://discuss.codechef.com/vote/50952/up/" rel="nofollow"> </a>
<div id="post-50952-score" class="post-score" title="current number of votes">
    1
</div>
<a id="post-50952-downvote" title="I dont like this post (click again to cancel)" class="ajax-command post-vote down" href="http://discuss.codechef.com/vote/50952/down/" rel="nofollow"> </a>
                            

<a id="favorite-mark" title="mark/unmark this question as favorite (click again to cancel)" class="ajax-command favorite-mark " href="http://discuss.codechef.com/mark_favorite/50952/" rel="nofollow"> </a>
<div id="favorite-count" class="favorite-count">
   
</div>

                        </div>
                    </td>
                    <td>
                        <div id="item-right">
                            <div class="question-body">
                                <p><strong>Problem link</strong> : <a href="http://www.codechef.com/SEPT14/problems/FIBTREE/">contest</a> <a href="http://www.codechef.com/problems/FIBTREE/">practice</a></p>
<p><strong>Difficulty</strong> : Hard</p>
<p><strong>Pre-requisites</strong> : heavy-light decomposition, segment trees, persistence</p>
<p><strong>Solution</strong> : </p>
<p>First, let's recall one of the properties of Fibonacci numbers: the <strong>n</strong>-th Fibbonacci number is <strong>ax<sup>n</sup>+(1-a)y<sup>n</sup></strong>, where:</p>
<ul>
<li><strong>a</strong> equals to <strong>(3+sqrt(5))/(5+sqrt(5))</strong>;</li>
<li><strong>x</strong> equals to <strong>(1+sqrt(5))/2</strong>;</li>
<li><strong>y</strong> equals to <strong>(1-sqrt(5))/2</strong>.</li>
</ul>
<p>So, the sum of the first <strong>K</strong> Fibbonacci numbers is basically the sum of two progressions.</p>
<p>Now there are still two questions:</p>
<ol>
<li>How do we operate with floating point numbers? How do we avoid the precision loss?</li>
<li>How do we add the geometric progression on a segment?</li>
</ol>
<p>The answer to the first quesion is: we don't operate with floating point numbers/doubles at all. This can be achieved this way: since our modulo <strong>1000000009</strong> is a prime, we can find such integer <strong>T</strong> that its' square modulo <strong>1000000009</strong> is <strong>5</strong>. This way we can define <strong>sqrt(5)</strong> in the modulo ring. Now we have that <strong>sqrt(5)</strong> is an integer, so all the operations become ordinary modular arithmetic operations.</p>
<p>Now we can have a segment tree for the progressions addition. <a href="http://discuss.codechef.com/questions/42557/funagp-editorial">Here</a> is the tutorial on developing such kind of segment trees.</p>
<p>When we have a segment tree, it's time to make in persistent and to build the heavy-light decomposition of the tree. Pay attention that if you store all the chains of the HLD in the single segment tree, there is no more effort required to maintain the versions of the persistence correctly. But if not, you'll also have to store some persistent array to get access to the right version of some exact chain. <a href="http://discuss.codechef.com/questions/6548/query-editorial">Here</a> is the detailed desription of persistent heavy-light decomposition's implementation.</p>
<p>Setter's solution: <a href="http://www.codechef.com/download/Solutions/2014/September/Setter/FIBTREE.cpp">link</a></p>
<p>Tester's solution: <a href="http://www.codechef.com/download/Solutions/2014/September/Tester/FIBTREE.cpp">link</a></p>
                            </div>
                            <div id="question-tags" class="tags-container tags">
                                
                                    <a href="http://discuss.codechef.com/tags/hard/" class="post-tag tag-link-hard" title="see questions tagged &#39;hard&#39;" rel="tag">hard</a>
                                
                                    <a href="http://discuss.codechef.com/tags/segment-tree/" class="post-tag tag-link-segment-tree" title="see questions tagged &#39;segment-tree&#39;" rel="tag">segment-tree</a>
                                
                                    <a href="http://discuss.codechef.com/tags/heavy-light/" class="post-tag tag-link-heavy-light" title="see questions tagged &#39;heavy-light&#39;" rel="tag">heavy-light</a>
                                
                                    <a href="http://discuss.codechef.com/tags/editorial/" class="post-tag tag-link-editorial" title="see questions tagged &#39;editorial&#39;" rel="tag">editorial</a>
                                
                                    <a href="http://discuss.codechef.com/tags/sept14/" class="post-tag tag-link-sept14" title="see questions tagged &#39;sept14&#39;" rel="tag">sept14</a>
                                
                                    <a href="http://discuss.codechef.com/tags/persistence/" class="post-tag tag-link-persistence" title="see questions tagged &#39;persistence&#39;" rel="tag">persistence</a>
                                
                                    <a href="http://discuss.codechef.com/tags/math/" class="post-tag tag-link-math" title="see questions tagged &#39;math&#39;" rel="tag">math</a>
                                
                            </div>
                            <div id="question-controls" class="post-controls">
                                

                                
<div class="community-wiki">
        This question is marked "community wiki".
        
    </div>
                            </div>
                            <div class="post-update-info-container">
                                    
<div class="post-update-info post-update-info-user">
    <p style="line-height:12px;">
        asked
        <strong>7 hours ago</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="./FIBTREE - Editorial - CodeChef Discuss_files/4d2e2cb3a637b8923ab5bdb95e54b08e.jpg" alt="xcwgf666&#39;s gravatar image">
    <p><a href="http://discuss.codechef.com/users/10879/xcwgf666">xcwgf666 ♦♦</a><br>
    <span class="score" title="359 karma">359</span><span title="37 badges"><span class="badge1">●</span><span class="badgecount">37</span></span><span title="48 badges"><span class="silver">●</span><span class="badgecount">48</span></span><span title="56 badges"><span class="bronze">●</span><span class="badgecount">56</span></span><br>
    
    <span title="Rate of the user&#39;s accepted answers" class="accept_rate">accept rate:</span>
    <span title="xcwgf666 has no accepted answers">0%</span>
    </p>
</div>

    <div class="post-update-info post-update-info-edited">
        <p style="line-height:12px;">
            <a href="http://discuss.codechef.com/revisions/50952/">
                edited
                <strong>7 hours ago</strong>
            </a>
        </p>
        
            <img class="gravatar" width="32" height="32" src="./FIBTREE - Editorial - CodeChef Discuss_files/2fad4a5d870e2f1f3558bce1e55fccc9.jpg" alt="pushkarmishra&#39;s gravatar image">
            <p><a href="http://discuss.codechef.com/users/8082/pushkarmishra">pushkarmishra</a><br>
            <span class="score" title="554 karma">554</span><span title="12 badges"><span class="badge1">●</span><span class="badgecount">12</span></span><span title="25 badges"><span class="silver">●</span><span class="badgecount">25</span></span><span title="29 badges"><span class="bronze">●</span><span class="badgecount">29</span></span></p>
        
    </div>


                            </div>
                            


<div class="comments-container" id="comments-container-50952">
    
</div>
<div id="comment-tools-50952" class="comment-tools">
    
    
        <a href="http://discuss.codechef.com/questions/50952/fibtree-editorial#" class="add-comment-link">add new comment</a>
    
</div>
<div id="comment-50952-form-container" class="comment-form-container">
    
    <form id="comment-50952-form" method="post" action="http://discuss.codechef.com/comment/50952/" accept-charset="utf-8"><div style="display:none;"><input type="hidden" id="csrfmiddlewaretoken" name="csrfmiddlewaretoken" value="7e6a0742ef6fb87b45f08d90f1a55986"></div>
        <div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="7e6a0742ef6fb87b45f08d90f1a55986"></div>
        <div class="comment-form-widgets-container">
            <textarea name="comment" class="commentBox" id="comment" style="padding-top: 0px; padding-bottom: 0px; resize: none; overflow: hidden; height: 80px;"></textarea>
            <div class="comment-form-buttons">
                <span id="comment-50952-chars-left" class="comment-chars-left">
                    <span class="comments-char-left-count">10</span>
                    <span class="comments-chars-togo-msg">characters needed</span>
                    <span class="comments-chars-left-msg" style="display: none;">characters left</span>
                </span>
                <input type="submit" class="comment-submit" value=" comment" disabled="">
                <input type="submit" class="comment-cancel" value=" cancel">
            </div>
            <div class="clear"></div>
            
        </div>
        <script type="text/html" class="new-comment-skeleton" id="new-comment-skeleton-50952">
            <div class="comment not_top_scorer" id="comment-%ID%">
                <div id="post-%ID%-score" class="comment-score"></div>
                <div class="comment-text">%COMMENT%</div>
                <div class="comment-info" id="comment-%ID%-info">
                    <a id="comment-%ID%-edit" href="%EDIT_URL%" title="Edit comment"
                        class="comment-edit" rel="nofollow"> </a>
                    <a id="comment-%ID%-delete" href="%DELETE_URL%" title="Delete comment"
                        class="ajax-command comment-delete confirm" rel="nofollow"> </a>
                    <a rel="nofollow" id="comment-%ID%-convert" style="display:none;" href="%CONVERT_URL%" title="Convert comment to answer"
                        class="ajax-command comment-convert confirm" rel="nofollow"> </a>

                    <span class="comment-age">(just now)</span>
                    <a class="comment-user" href="%PROFILE_URL%">%USERNAME%</a>
                    
                        
                    
                </div>
             </div>
        </script>
    </form>
    
</div>
    

                        </div>

                    </td>
                </tr>
            </tbody></table>
            
            
                <hr>
                <div class="tabBar">
                    <a name="sort-top"></a>
                    <div class="headQuestions">
                    One Answer:
                    </div>
                    
<div class="tabsA"><a href="http://discuss.codechef.com/questions/50952/fibtree-editorial?sort=oldest" title="oldest answers will be shown first">oldest</a><a href="http://discuss.codechef.com/questions/50952/fibtree-editorial?sort=newest" title="newest answers will be shown first">newest</a><a href="http://discuss.codechef.com/questions/50952/fibtree-editorial?sort=votes" class="on" title="most voted answers will be shown first">most voted</a></div>

                </div>
                

                
                    <a name="51001"></a>
                    <div id="answer-container-51001" class="answer ">
                        <table style="width:100%;">
                            <tbody><tr>
                                <td style="width:30px;vertical-align:top">
                                    <div class="vote-buttons">
                                        

<a id="post-51001-upvote" title="I like this post (click again to cancel)" class="ajax-command post-vote up " href="http://discuss.codechef.com/vote/51001/up/" rel="nofollow"> </a>
<div id="post-51001-score" class="post-score" title="current number of votes">
    0
</div>
<a id="post-51001-downvote" title="I dont like this post (click again to cancel)" class="ajax-command post-vote down" href="http://discuss.codechef.com/vote/51001/down/" rel="nofollow"> </a>
                                        


    



                                    </div>
                                </td>
                                <td>
                                    <div class="item-right">
                                        <div class="answer-body">
                                            <p>Could you release some tricky test-cases for this problem? I have tried thousands of random test-cases and compared mine and the accepted ones, and they have all matched. I must be missing something.</p>
<p>On another note, there is another easy way to update the Segment Tree with the Fibonacci series. Define a new sequence G such that G(1)=F(a)+F(b)+F(c)... for all a,b,c... such that a,b,c are all the starting terms of the sequence added. Similarly for G(2). Clearly G(3)=G(2)+G(1) (The Fibonacci relation still holds.) This can be used to generate the sequence using matrix exponentiation or precomputation.</p>
                                        </div>
                                        <div class="answer-controls post-controls">
                                            
<span class="action-link"><a rel="nofollow" title="answer permanent link" class="ajax-command withprompt  copy" href="http://discuss.codechef.com/answer_link/51001/">link</a></span><span class="action-link-separator">|</span><span class="action-link"><a rel="nofollow" title="award points to patch_adams" class="ajax-command withprompt  " href="http://discuss.codechef.com/award_points/user/27520/answer/51001/">award points</a></span>
                                            

                                        </div>
                                        <div class="post-update-info-container">
                                            
<div class="post-update-info post-update-info-user">
    <p style="line-height:12px;">
        answered
        <strong>5 hours ago</strong>
    </p>
    <img class="gravatar" width="32" height="32" src="./FIBTREE - Editorial - CodeChef Discuss_files/default.jpg" alt="patch_adams&#39;s gravatar image">
    <p><a href="http://discuss.codechef.com/users/27520/patch_adams">patch_adams</a><br>
    <span class="score" title="1 karma">1</span><br>
    
    <span title="Rate of the user&#39;s accepted answers" class="accept_rate">accept rate:</span>
    <span title="patch_adams has no accepted answers">0%</span>
    </p>
</div>


                                        </div>
                                        


<div class="comments-container" id="comments-container-51001">
    
</div>
<div id="comment-tools-51001" class="comment-tools">
    
    
        <a href="http://discuss.codechef.com/questions/50952/fibtree-editorial#" class="add-comment-link">add new comment</a>
    
</div>
<div id="comment-51001-form-container" class="comment-form-container">
    
    <form id="comment-51001-form" method="post" action="http://discuss.codechef.com/comment/51001/" accept-charset="utf-8"><div style="display:none;"><input type="hidden" name="csrfmiddlewaretoken" value="7e6a0742ef6fb87b45f08d90f1a55986"></div>
        <div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="7e6a0742ef6fb87b45f08d90f1a55986"></div>
        <div class="comment-form-widgets-container">
            <textarea name="comment" class="commentBox" id="comment" style="padding-top: 0px; padding-bottom: 0px; resize: none; overflow: hidden; height: 80px;"></textarea>
            <div class="comment-form-buttons">
                <span id="comment-51001-chars-left" class="comment-chars-left">
                    <span class="comments-char-left-count">10</span>
                    <span class="comments-chars-togo-msg">characters needed</span>
                    <span class="comments-chars-left-msg" style="display: none;">characters left</span>
                </span>
                <input type="submit" class="comment-submit" value=" comment" disabled="">
                <input type="submit" class="comment-cancel" value=" cancel">
            </div>
            <div class="clear"></div>
            
        </div>
        <script type="text/html" class="new-comment-skeleton" id="new-comment-skeleton-51001">
            <div class="comment not_top_scorer" id="comment-%ID%">
                <div id="post-%ID%-score" class="comment-score"></div>
                <div class="comment-text">%COMMENT%</div>
                <div class="comment-info" id="comment-%ID%-info">
                    <a id="comment-%ID%-edit" href="%EDIT_URL%" title="Edit comment"
                        class="comment-edit" rel="nofollow"> </a>
                    <a id="comment-%ID%-delete" href="%DELETE_URL%" title="Delete comment"
                        class="ajax-command comment-delete confirm" rel="nofollow"> </a>
                    <a rel="nofollow" id="comment-%ID%-convert" style="display:none;" href="%CONVERT_URL%" title="Convert comment to answer"
                        class="ajax-command comment-convert confirm" rel="nofollow"> </a>

                    <span class="comment-age">(just now)</span>
                    <a class="comment-user" href="%PROFILE_URL%">%USERNAME%</a>
                    
                        
                    
                </div>
             </div>
        </script>
    </form>
    
</div>
    

                                    </div>
                                </td>
                            </tr>
                        </tbody></table>
                    </div>
                
                <div class="paginator-container-left">
                    
                </div>
            
        <form id="fmanswer" action="http://discuss.codechef.com/questions/50952/answer/" method="post"><div style="display:none;"><input type="hidden" name="csrfmiddlewaretoken" value="7e6a0742ef6fb87b45f08d90f1a55986"></div>
            <div style="display:none"><input type="hidden" name="csrfmiddlewaretoken" value="7e6a0742ef6fb87b45f08d90f1a55986"></div>
            <div style="clear:both">
            </div>

            
                <div style="padding:10px 0 0 0;">
                    <div class="headNormal">
                        
                            Your answer
                        
                    </div>
                </div>
                

                <div id="description" class="">
                    <div id="wmd-button-bar" class="wmd-panel"><ul id="wmd-button-row"><li class="wmd-button" id="wmd-bold-button" title="Strong &lt;strong&gt; Ctrl+B" style="background-position: 0px 0px;"></li><li class="wmd-button" id="wmd-italic-button" title="Emphasis &lt;em&gt; Ctrl+I" style="background-position: -20px 0px;"></li><li class="wmd-spacer" id="wmd-spacer1"></li><li class="wmd-button" id="wmd-link-button" title="Hyperlink &lt;a&gt; Ctrl+L" style="background-position: -40px 0px;"></li><li class="wmd-button" id="wmd-quote-button" title="Blockquote &lt;blockquote&gt; Ctrl+Q" style="background-position: -60px 0px;"></li><li class="wmd-button" id="wmd-code-button" title="Code Sample &lt;pre&gt;&lt;code&gt; Ctrl+K" style="background-position: -80px 0px;"></li><li class="wmd-button" id="wmd-image-button" title="Image &lt;img&gt; Ctrl+G" style="background-position: -100px 0px;"></li><li class="wmd-spacer" id="wmd-spacer2"></li><li class="wmd-button" id="wmd-olist-button" title="Numbered List &lt;ol&gt; Ctrl+O" style="background-position: -120px 0px;"></li><li class="wmd-button" id="wmd-ulist-button" title="Bulleted List &lt;ul&gt; Ctrl+U" style="background-position: -140px 0px;"></li><li class="wmd-button" id="wmd-heading-button" title="Heading &lt;h1&gt;/&lt;h2&gt; Ctrl+H" style="background-position: -160px 0px;"></li><li class="wmd-button" id="wmd-hr-button" title="Horizontal Rule &lt;hr&gt; Ctrl+R" style="background-position: -180px 0px;"></li><li class="wmd-spacer" id="wmd-spacer3"></li><li class="wmd-button" id="wmd-undo-button" title="Undo - Ctrl+Z" style="background-position: -200px -20px;"></li><li class="wmd-button" id="wmd-redo-button" title="Redo - Ctrl+Y" style="background-position: -220px -20px;"></li><li class="wmd-button" id="wmd-help-button" style="background-position: -240px 0px;"><a href="http://wmd-editor.com/" target="_blank" title="WMD website"></a></li></ul></div>
                    <div class="resizable-textarea"><span><textarea rows="10" cols="40" name="text" id="editor" class="processed"></textarea><div class="grippie" style="margin-right: -6px;"></div></span></div>
                    <div class="preview-toggle">
                        <table width="100%">
                            <tbody><tr>
                                <td>
                                    <span id="pre-collapse" title="Toggle the real time Markdown editor preview">[hide preview]</span>
                                </td>
                                <td style="text-align: right;" id="editor-metrics"></td>
                                
                                <td style="text-align:right;">
                                    <input type="checkbox" name="wiki" id="id_wiki">
                                    <span style="font-weight:normal;cursor:help" title="if you choose community wiki option, the question and answer do not generate points and name of author will not be shown">
                                            <label for="id_wiki">community wiki</label> 
                                    </span>
                                </td>
                                
                            </tr>

                        </tbody></table>
                    </div>
                    
                    <div id="previewer" class="wmd-preview"></div>
                </div>

	            

                <p><span class="form-error"></span></p>
                
                <input type="button" value="Post Your Answer" class="submit" style="float:left" onclick="submitClicked(event, this.form)">
            
        </form>
    </div>
</div>


        </div>
        <div id="CARight">
            
<div class="boxC" id="subscription_box">
    <h3 class="subtitle">Follow this question</h3><strong>By Email:</strong><div class="subscription-status"><p>You are not subscribed to this question.</p></div><p><a class="ajax-command sidebar_button subscription_switch" href="http://discuss.codechef.com/subscribe/50952/">
        
            subscribe me
        
    </a></p><p>
        
            (you can adjust your notification settings on your <a href="http://discuss.codechef.com/users/38996/himansu-rathi/subscriptions/">profile</a>)
        
    </p><strong>By RSS:</strong><p><a class="feed-icon" style="background-image:url(&#39;/m/default/media/images/feed-icon-small.png&#39;);" href="http://discuss.codechef.com/questions/50952/fibtree-editorial?type=rss" title="subscribe to answers"></a>
    Answers
</p><p><a class="feed-icon" style="background-image:url(&#39;/m/default/media/images/feed-icon-small.png&#39;);" href="http://discuss.codechef.com/questions/50952/fibtree-editorial?type=rss&comments=yes" title="subscribe to comments and answers"></a>
    Answers and Comments
</p>

</div>


<div class="boxC" id="editor_side_bar" style="display: none;">
    <p class="subtitle darkred">Markdown Basics</p>
    <ul class="list-item">
        <li>
            *italic* or _italic_
        </li>
        <li>
			**bold** or __bold__
        </li>
        <li>
            <b>link</b>:[text](http://url.com/ "title")

        </li>

        <li>
            <b>image</b>?![alt text](/path/img.jpg "title")

        </li>
        <li>
			numbered list:
            1.  Foo
            2.  Bar
        </li>
        <li>
			to add a line break simply add two spaces to where you would like the new line to be.
        </li>
        <li>
			basic HTML tags are also supported
        </li>
    </ul>
    <p class="info-box-follow-up-links">
        <a href="http://discuss.codechef.com/markdown_help/" target="_blank">learn more about Markdown </a>
    </p>
</div>








<div class="boxC">
    <p>
		Tags:
    </p>
    <p class="tags">
        
        	<a href="http://discuss.codechef.com/tags/editorial/" class="tag-link-editorial" title="see questions tagged&#39;editorial&#39;using tags" rel="tag">editorial</a> <span class="tag-number">×13,405</span><br>
        
        	<a href="http://discuss.codechef.com/tags/sept14/" class="tag-link-sept14" title="see questions tagged&#39;sept14&#39;using tags" rel="tag">sept14</a> <span class="tag-number">×5,608</span><br>
        
        	<a href="http://discuss.codechef.com/tags/math/" class="tag-link-math" title="see questions tagged&#39;math&#39;using tags" rel="tag">math</a> <span class="tag-number">×2,296</span><br>
        
        	<a href="http://discuss.codechef.com/tags/hard/" class="tag-link-hard" title="see questions tagged&#39;hard&#39;using tags" rel="tag">hard</a> <span class="tag-number">×1,893</span><br>
        
        	<a href="http://discuss.codechef.com/tags/segment-tree/" class="tag-link-segment-tree" title="see questions tagged&#39;segment-tree&#39;using tags" rel="tag">segment-tree</a> <span class="tag-number">×1,287</span><br>
        
        	<a href="http://discuss.codechef.com/tags/persistence/" class="tag-link-persistence" title="see questions tagged&#39;persistence&#39;using tags" rel="tag">persistence</a> <span class="tag-number">×522</span><br>
        
        	<a href="http://discuss.codechef.com/tags/heavy-light/" class="tag-link-heavy-light" title="see questions tagged&#39;heavy-light&#39;using tags" rel="tag">heavy-light</a> <span class="tag-number">×461</span><br>
        
    </p>
    <p>
        Asked: <strong title="Sept. 15, 2014, 3:37 p.m.">7 hours ago</strong>
    </p>
    <p>
     	Seen: <strong>268 times</strong>
    </p>
    <p>
        Last updated: <strong title="Sept. 15, 2014, 5:57 p.m.">5 hours ago</strong>
    </p>
</div>





<div class="boxC">
    <h3 class="subtitle">Related questions</h3>
    <div class="questions-related">

        
        <p>
            <a href="http://discuss.codechef.com/questions/45602/idols-editorial" title="PROBLEM LINK:Practice Contest Author: Konstantin Sokol Tester: Tasnim Imran Sunny Editorialist: Praveen Dhinwa DIFFICULTY:HARDPREREQUISITES:heavy light decomposition, segment treePROBLEM:There are N persons in Mike&#39;s school. No person in the school has a name(except Mike), but all ">IDOLS - Editorial</a>
        </p>
        
        <p>
            <a href="http://discuss.codechef.com/questions/10134/qtree-editorial" title="PROBLEM LINKSPracticeContestDIFFICULTYHARDPREREQUISITESGraph Theory, Segment Trees, Heavy Light DecompositionPROBLEMYou are given a connected graph on N vertices consisting of N edges.Each edge has a weight, not necessarily positiveThe graph contains a single cycleThe cycle contains odd ">QTREE - Editorial</a>
        </p>
        
        <p>
            <a href="http://discuss.codechef.com/questions/6548/query-editorial" title="Problem Link:PracticeContestDifficulty:HardPre-requisites:Heavy-light Decomposition, Persistent data structuresProblem:You are given a tree of N vertices. Each vertex is initialized to value 0. Further you are given 3 kinds of operations: c X Y A B - the &quot;Change&quot; operation: Along the path f">QUERY - Editorial</a>
        </p>
        
        <p>
            <a href="http://discuss.codechef.com/questions/49343/pushflow-editorial" title="PROBLEM LINK:Practice Contest Author: Constantine Sokol Tester: Praveen Dhinwa and Hiroto Sekido Editorialist: Lalit Kundu DIFFICULTY:HardPREREQUISITES:Segment Tree, Heavy Light Decomposition, FlowPROBLEM:Given a graph G, consisting of N vertices and M edges, each edge has a positi">PUSHFLOW - Editorial</a>
        </p>
        
        <p>
            <a href="http://discuss.codechef.com/questions/50953/floori4-editorial" title="Problem link : contest practiceDifficulty : EasyPre-requisites : AD-hoc problems experienceSolution :At first, the formula for the sum of 14+24+...+n4 is n(1+n)(1+2n)(-1+3n+3n2)/30. The level of the problem is EASY, so the formula can be found on the internet. At second, there are only sqrt(n) ">FLOORI4 - Editorial</a>
        </p>
        
        <p>
            <a href="http://discuss.codechef.com/questions/42557/funagp-editorial" title="PROBLEM LINK:Practice Contest Author: Devendra Agarwal Tester: Sergey Kulik Editorialist: Lalit Kundu DIFFICULTY:HARD PREREQUISITES:Binary Indexed Trees/Segment Trees Mathematics and Number Theory PROBLEM:Given fixed parameters R, p1, p2 (p1,p2 are primes) and array A, perform">FUNAGP - Editorial</a>
        </p>
        
        <p>
            <a href="http://discuss.codechef.com/questions/50956/rainbowb-editorial" title="Problem link : contest practiceDifficulty : SimplePre-requisites : basic mathSolution :If we reformulate the problem, we&#39;ll get the following one: given an integer N, calculate the number of integer vectors (a1, a2, a3, a4, a5, a6, a7) such that:ai &amp;gt; 0, for each i, 1 &amp;lt;= i &amp;lt;= 7;2(a1+a">RAINBOWB - Editorial</a>
        </p>
        
        <p>
            <a href="http://discuss.codechef.com/questions/31833/qtree6-editorial" title="PROBLEM LINK:PracticeContestAuthor: Minako Kojima Tester: Gerald Agapov Editorialist: Jingbo ShangDIFFICULTY:HardPREREQUISITES:Link Cut Tree, Heavy-Light DecompositionPROBLEM:Given a 0/1 colored tree of N nodes. Support two types operations (Q in total):1. Ask the size of same color con">QTREE6 - Editorial</a>
        </p>
        
        <p>
            <a href="http://discuss.codechef.com/questions/4505/qpolysum-editorial" title="PROBLEM LINKSPracticeContestDIFFICULTYHARDPREREQUISITESPolynomial representations with binomial coefficientsBinomial theoremCombinatoricsHorner&#39;s methodExtended Euclid&#39;s algorithmFast Fourier transformNumber-theoretic transformChinese remainder theoremPROBLEMYou are given integ">QPOLYSUM - Editorial</a>
        </p>
        
        <p>
            <a href="http://discuss.codechef.com/questions/24750/rrtree-editorial" title="Problem Link:PracticeContestauthor: Roman Rubanenkotester/editorialist: Utkarsh LathDifficulty:HardPre-requisites:understanding of rooted trees, diameter of a tree, heavy-light composition, BIT / segtreeProblem:Given a tree, you have to find its diameter. But thats not all of it. The tree ">RRTREE - Editorial</a>
        </p>
        

    </div>
</div>



        </div>
        <div id="tail" style="clear:both;">
            
            
        </div>
    </div>
    <div class="spacer3"></div>
</div>

        
            
            <div id="ground">
                
                    <p>

<link rel="stylesheet" type="text/css" href="./FIBTREE - Editorial - CodeChef Discuss_files/cc.css">
</p>
<div id="cc-footer" class="cc-wrapper">
    <div class="cc-inner-wrapper">
        <!-- SECOND NAV -->
        <div class="cc-cols-2">
            <div id="cc-secondary-nav">
                <ul>
                    <!-- <li><a href="http://blog.corp.pw/" target="_blank">.pw Corp Blog</a></li>
                    <li><a href="http://start.pw/" target="_blank">Vision</li> -->
                    <li><a href="http://www.codechef.com/aboutus/">About CodeChef</a></li>
                    <li><a href="http://www.directi.com/" target="_blank">About Directi</a></li>
                    <li><a href="http://www.codechef.com/ceoscorner/">CEO's Corner</a></li>
                    <!-- <li><a href="http://wiki.directi.com/" target="_blank">Wiki</a></li>
                    <li><a href="http://wiki.directi.com/display/corp/Home" target="_blank">About</a></li> -->
                </ul>
                <ul>
                    <li><a href="http://www.codechef.com/campus/">CodeChef Campus Chapters</a></li>
                    <li><a href="http://www.codechef.com/school/">CodeChef For Schools</a></li>
                    <li><a href="http://www.codechef.com/contactus">Contact Us</a></li>
                </ul>
            </div>
            <div id="cc-fineprint">
                <p>© 2009, Directi Group. All Rights Reserved.</p>
                <p><small>Powered by OSQA<br> </small></p>
            </div>
        </div>
        <!-- /SECOND NAV -->
        <!-- LEGAL & COPYRIGHT -->
        <div>
            <div id="cc-sponsor-strip">
                <a href="http://www.directi.com/" target="_blank"><img src="./FIBTREE - Editorial - CodeChef Discuss_files/footer-sponsor-strip.gif" alt="Sponsors" title="Sponsors"></a>
            </div>
        </div>
        <!-- /LEGAL & COPYRIGHT -->
    </div>
</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./FIBTREE - Editorial - CodeChef Discuss_files/ga.js" type="text/javascript"></script>

<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4090524-6");
pageTracker._trackPageview();
} catch(err) {}</script>

<!-- Start Alexa Certify Javascript -->

<script type="text/javascript">
_atrk_opts = { atrk_acct:"q16Cj1a8gN00iz", domain:"codechef.com",dynamic: true};
(function() { var as = document.createElement('script'); as.type = 'text/javascript'; as.async = true; as.src = "https://d31qbv1cthcecs.cloudfront.net/atrk.js"; var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(as, s); })();
</script>

<noscript>&lt;img src="https://d5nxst8fruw4z.cloudfront.net/atrk.gif?account=q16Cj1a8gN00iz" style="display:none" height="1" width="1" alt="" /&gt;</noscript>

<!-- End Alexa Certify Javascript -->
                
            </div>
            
        
        

        
        </div>

        <!-- Put all elements with fixed position here, IE6 fixed position fix: http://ryanfait.com/position-fixed-ie6/ -->
        <div class="notify" style="display:none">
            
                
            
            <a id="close-notify" onclick="notify.close(true)">×</a>
        </div>

    

<!-- end template base_content.html -->
</body></html>